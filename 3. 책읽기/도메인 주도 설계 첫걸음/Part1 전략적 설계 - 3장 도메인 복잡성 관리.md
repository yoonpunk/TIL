# Part1 전략적 설계 - 3장 도메인 복잡성 관리

프로젝트의 성공을 위해선 유비쿼터스 언어를 개발하는 것이 중요하다. 그러나 비즈니스 도메인이 복잡해질수록 도메인 전문가들의 멘탈 모델이 다양하게 존재하게 되고, 각 영역에서 사용하는 용어나 모델이 서로 충돌할 수 있다.(ex. 동일한 용어가 영역마다 다른 뜻으로 쓰일 수 있다.)
이로 인해 유비쿼터스 언어의 가장 중요한 특징인 일관성을 유지하는 것이 어려워진다. 

이러한 문제를 해결하기 위한 방법으로는 유비쿼터스 언어의 일관성을 보장할 수 있는 바운디드 컨텍스트를 정의하는 것이다.

## 바운디드 컨텍스트란?

바운디드 컨텍스트란 유비쿼터스 언어(혹은 모델)가 일관되게 규정될 수 있는 일종의 경계라고 할 수 있다. 바운디드 컨텍스트 내에서는 유비쿼터스 언어와 모델이 충돌하지 않으며, 동일한 언어를 사용한다고 하더라도 바운디드 컨텍스트마다 해결하고자 하는 문제에 맞게 서로 다른 의미를 갖을 수 있다. 따라서 유비쿼터스 언어는 반드시 바운디드 컨텍스트가 먼저 식별되어야 의미가 있다고 할 수 있다.


## 바운디드 컨텍스트의 범위와 크기

바운디드 컨텍스트를 식별하는 것은 전략적 설계 의사결정이다. 바운디드 컨텍스트는 그 목적에 따라 넓어질 수도 있고, 좁아질 수도 있다. 바운디드 컨텍스트가 넓어질 경우 전체 시스템을 식별하고 통합하는게 상대적으로 쉬워지지만 모델이 복잡해지고 유비쿼터스 언어의 일관성을 유지하는게 상대적으로 어려워진다. 반면 바운디드 컨텍스트가 좁아질 경우 유비쿼터스 언어의 일관성을 유지하고 모델이 단순해지지만 모델의 중복이 발생할 수 있고 서로 다른 영역의 설계를 통합하는데 비용이 많이 들어갈 수 있다. 따라서 바운디드 컨텍스트의 크기에는 답이 없으며 해결하고자 하는 문제에 맞게 그 크기를 결정하는 것이 중요하다.

큰 바운디드 컨텍스트를 작은 바운디드 컨텍스트로 분해해야 하는 경우가 있다. 특정 기능의 분리가 필요하거나 수명주기를 따로 관리해야 하는 경우, 그리고 엔지니어링 조직을 분리해야하는 경우와 같이 분리된 영역이 독립적으로 운영되고 확장이 필요할 때가 이에 해당한다. 

단, 응집된 기능을 여러 바운디드 컨텍스트로 분해하게 되는 경우에는 각 영역이 서로에게 종속될 수 있기 때문에 독립적으로 발전할 수 없게 된다. (ex. 비즈니스 변경 시, 동시 배포가 필요하게 되는 경우 등) 따라서 같은 데이터에서 작동하는 응집된 유스케이스의 경우 바운디드 컨텍스트를 분해하는 것은 좋지 않다.


## 바운디드 컨텍스트와 하위 도메인의 관계

바운디드 컨텍스트와 하위 도메인 모두 각각의 목적에 맞게 비즈니스 도메인을 분해하는데 사용할 수 있는 개념이다.

하위 도메인은 비즈니스 활동의 세분화된 영역으로 응집될 수 있는 유스케이스의 집합이라고 할 수 있다. 즉, 하위 도메인은 비즈니스 관점에서 비즈니스 도메인의 영역을 분해하는 단위이며 비즈니스 전략에 의해 발견 된다. 소프트웨어 엔지니어는 하위 도메인을 식별하기 위해 비즈니스 도메인을 분석한다.

바운디드 컨텍스트는 문제 해결을 위해 소프트웨어 엔지니어가 설계한 유비쿼터스 언어(혹은 모델)의 경계이다. 이 경계를 통해 소프트웨어 엔지니어는 현실세계의 문제를 목적에 맞게 모델링하고 유비쿼터스 언어를 명확하게 정의할 수 있다. 다시 말해 바운디드 컨텍스트는 소프트웨어 엔지니어가 문제 해결을 하기 위한 설계 전략이라고 할 수 있다.

바운디드 컨텍스트와 하위 도메인은 완벽한 일대일 관계라고 할 수 없다. 경우에 따라 하나의 하위 도메인에 여러 개의 바운디드 컨텍스트를 사용하는 것이 유용할 때가 있고, 여러 개의 하위 도메인에 하나의 바운디드 컨텍스트를 사용하는 것이 유용할 때가 있을 수 있다. 따라서 두 경계를 유연하게 정의하여 사용하는 것이 중요하다.

## 경계로써의 바운디드 컨텍스트

바운디드 컨텍스트는 물리적 경계과 소유권 경계로써 역할을 수행한다.

바운디드 컨텍스트는 시스템의 물리적 경계 역할을 수행한다. 각 바운디드 컨텍스트는 개별 프로젝트나 서비스로 구현되며 독립적으로 운영되어야 한다. 이를 통해 해당 바운디드 컨텍스트의 요구사항이나 문제 해결에 가장 적합한 기술 스택을 선택하여 구현할 수 있다. 만약, 하나의 바운디드 컨텍스트 내에 여러 하위 도메인이 있다면 모듈이나 패키지 등의 논리적인 경계로 이를 구분할 수 있다.

또한 바운디드 컨텍스트는 시스템의 소유권 경계 역할을 수행한다. 바운디드 컨텍스트를 통해 각 팀의 작업을 효율적으로 분배하고 원활이 협업할 수 있게 한다. 단, 하나의 바운디드 컨텍스트는 하나의 팀에서만 관리되어야 하며, 서로 분리된 바운디드 컨텍스트간의 연동을 위한 명확한 통신 프로토콜을 정의해야 한다. 물론 한 팀이 여러개의 바운디드 컨텍스트를 소유할 수 있다.


